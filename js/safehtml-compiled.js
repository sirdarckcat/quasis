(function(){var q={2048:'"',4096:"'",6144:""},y=[1,1,1,1,1,1,,,,1,,1],z=[0,1,4,4,5,5,,1,2,10,,9,9,12,12,12,7,,,6,6,8,2],A={"break":1,"case":1,"continue":1,"delete":1,"do":1,"else":1,"finally":1,"instanceof":1,"return":1,"throw":1,"try":1,"typeof":1}
function B(a){var b=a.length,c=a.charAt(b-1);switch(c){case "+":case "-":for(var d=b-1;d>0&&a.charAt(d-1)===c;)--d;a=b-d;return(a&1)===1;case ".":if(b===1)return 1;a=a.charAt(b-2);return!("0"<=a&&a<="9");case "/":return b===1;default:return/[#%&(*,:-?[^{-~]/.test(c)?1:(a=a.match(/[\w$]+$/))&&A[a[0]]===1}}function C(a,b,c){var d,i=0,l=0;switch(b){case 1024:d=8;break;case 256:d=16;i=8192;break;case 512:d=9;break;case 768:d=22;l=32768;break;default:throw Error(b)}return d|a|b|c|i|l}
var fa=function(){function a(a){return a.indexOf("&")<0?a:a.replace(/&(?:#(?:(x[\da-f]+)|(\d+))|(lt|gt|amp|quot|apos));/gi,function(a,D,b,c){return D||b?String.fromCharCode(0+(D||b)):aa[c.toLowerCase()]})}function b(a){this.a=a}function c(a,Z,k){var c=a.prototype=new b(/(?!)/);c.constructor=a;c.d=Z;if(k)c.f=k}function d(a,b){this.a=a;this.i=b}function i(a,b){this.a=a;this.j=b}function l(a){this.a=a}function n(a){this.a=a}function g(a){this.a=a}function m(a,b){this.a=a;this.h=b}function e(a,b){this.a=
a;this.e=b}function f(a,b){this.a=a;this.e=b}function t(a){this.a=a}function r(a){this.a=a}function j(a){this.a=a}function w(a){this.a=a}function E(a){this.a=a}function F(a){this.a=a}function v(a){this.a=a}function x(){this.b=this.c=0}function ba(b,c){for(;b;){var k;var d=b,e=c&6144;k=d.length;e===0?k=-1:e===6144?k=(d=d.match(/[\s>]/))?d.index:k:(d=d.indexOf(q[e]),k=d>=0?d:k);if(k===-1)k=new x,k.g(b,c),b=b.substring(k.c),c=k.b;else{for(var d=b.length,d=k<d?k+q[c&6144].length:-1,e=a(b.substring(0,
k)),f=new x;e.length!==0;)f.g(e,c),e=e.substring(f.c),c=f.b;if(d!==-1)b=b.substring(d),c=4|c&224;else{if(k!==b.length)throw Error();b=""}}}return c}var aa={p:"<",o:">",m:"&",q:'"',n:"'"};b.prototype.f=function(){return 1};b.prototype.d=function(){throw Error()};c(d,function(){return this.i});c(i,function(){return 4|this.j});var ca={32:8208,64:9,224:0,160:1,96:1,128:1,192:1};c(l,function(a){a&=224;var b=ca[a];if(typeof b!=="number")throw Error(a);return b===1?b|a:b});c(n,function(a){return 4|a&224})
var da={action:1,archive:1,background:1,cite:1,classid:1,codebase:1,data:1,dsync:1,href:1,longdesc:1,src:1,usemap:1};c(g,function(a,b){var c=b[1].toLowerCase(),c="on"===c.substring(0,2)?256:"style"===c?512:da[c]===1?768:1024;return 5|a&224|c});c(m,function(a){return C(a&224,a&1792,this.h)});c(e,function(a){return a&-229408|this.e});c(f,function(a){return a&8160|this.e});c(t,function(a,b){switch(a&24576){case 16384:return a&-24608|8208;case 8192:return a&-24608|21;default:throw Error("Ambiguous / could be a RegExp or division.  Please add parentheses before `"+
b[0]+"`")}});c(r,function(a,b){return a&-24577|(B(b[0])?8192:16384)});c(j,function(a){return a});var o=new j(/$/),u=new b(/[#?]|$/);u.d=function(a,b){var c=a&229376;c===32768&&(c=65536);if(c!==131072){var d=b[0];"?"===d&&c!==196608?c=98304:"#"===d&&(c=131072)}return a&-229377|c};c(w,function(){return 228},function(a){return(a&1792)===0});var s=new w(/<\/script\b/i),p=new w(/<\/style\b/i),ea={96:"textarea",128:"title",160:"listing",192:"xmp"};c(E,function(){return 228},function(a,b){return b[1].toLowerCase()===
ea[a&224]});c(F,function(a,b){var c=b[1],c='"'===c?14:"'"===c?15:13;return a&-229408|c|32768});c(v,function(a){return a&-24608|16400});var h=[];h[0]=[new j(/^[^<]+/),new d(/<\!--/,7),new i(/<script(?=[\s/>]|$)/i,32),new i(/<style(?=[\s/>]|$)/i,64),new i(/<textarea(?=[\s/>]|$)/i,96),new i(/<title(?=[\s/>]|$)/i,128),new i(/<xmp(?=[\s/>]|$)/i,192),new d(/<\/?/,2)];h[2]=[new d(/^[a-z]+/i,3),new d(/^(?=[\W\d_])/,0)];h[3]=[new j(/^[\d:a-z-]*(?:[^\W_]|$)/i),new i(/^(?=[\s/>])/,224)];h[4]=[new g(/^\s*([a-z][\w-]*)/i),
new l(/^\s*\/?>/),new j(/^\s+$/)];h[5]=[new e(/^\s*=/,6),new n(/^/)];h[6]=[new m(/^\s*"/,2048),new m(/^\s*'/,4096),new m(/^(?=[^\s"'>])/,6144),new n(/^(?=>|\s+[\w-]+\s*=)/),new j(/^\s+/)];h[7]=[new d(/--\>/,0),o];h[8]=[o];h[9]=[new e(/\/\*/,10),new e(/"/,11),new e(/'/,12),new F(/\burl\s*\(\s*(["']?)/i),p,o];h[10]=[new e(/\*\//,9),p,o];h[11]=[new e(/"/,9),new j(/\\(?:\r\n?|[\n\f"])/),new d(/[\n\f\r]/,23),p,o];h[12]=[new e(/'/,9),new j(/\\(?:\r\n?|[\n\f'])/),new d(/[\n\f\r]/,23),p,o];h[13]=[new e(/[\s)\\]/,
9),u,new e(/["']/,23),p];h[15]=[new e(/'/,9),u,new j(/\\(?:\r\n?|[\n\f'])/),new d(/[\n\f\r]/,23),p];h[14]=[new e(/"/,9),u,new j(/\\(?:\r\n?|[\n\f"])/),new d(/[\n\f\r]/,23),p];h[16]=[new e(/\/\*/,18),new e(/\/\//,17),new f(/"/,19),new f(/'/,20),new t(/\//),new r(/(?:[^\s"'/<\\]|<(?!\/script))+/i),new j(/\s+/),s];h[18]=[new e(/\*\//,16),s,o];h[17]=[new e(/[\n\r\u2028\u2029]/,16),s,o];h[19]=[new v(/"/),s,new j(/^(?:[^\n\r"<\\\u2028\u2029]|\\(?:\r\n?|[^\r<]|<(?!\/script))|<(?!\/script))+/i)];h[20]=[new v(/'/),
s,new j(/^(?:[^\n\r'<\\\u2028\u2029]|\\(?:\r\n?|[^\r<]|<(?!\/script))|<(?!\/script))+/i)];h[21]=[new v(/\//),s,new j(/^(?:[^\n\r/<[\\\u2028\u2029]|\\.|\\?<(?!\/script)|\[(?:[^\n\r<\\\]\u2028\u2029]|\\.)*|\\?<(?!\/script)])+/i)];h[22]=[u];h[1]=[new E(/<\/(\w+)\b/),o];x.prototype.g=function(a,b){if((b&31)===23)this.c=a.length,this.b=b;else{var c=2147483647,d=-1,e,f,l=h[b&31],g,i,j,n,m,o=l.length;for(m=0;m<o;++m)if(g=l[m],i=a.match(g.a))j=i.index,j<c&&(n=j+i[0].length,g.f(b,i)&&(c=j,d=n,e=g,f=i));e?
(this.b=e.d(b,f),this.c=d):(this.b=23,this.c=a.length);if(this.c===0&&(this.b&31)===(b&31))throw Error(b)}};return ba}();function G(){}G.prototype.toString=function(){return this.content};function H(){function a(a){this.content=a}var b=a.prototype=new G;b.constructor=a;b.contentKind=0;return a}var I=H(0),ga=H(1),ha=H(2);SanitizedHtml=I;SanitizedJsStrChars=ga;SanitizedUri=ha
function J(a){return a&&a.contentKind===0?a:a instanceof Array?a.map(J).join(""):a===void 0?"":String(a).replace(K,L)}function ia(a){return a&&a.contentKind===0?String(a.content).replace(M,L):String(a).replace(K,L)}function ja(a){a&&a.contentKind===0?(a=String(a.content).replace(N,""),a=String(a).replace(M,L)):a=String(a).replace(K,L);return a}function ka(a){a&&a.contentKind===0?(a=String(a.content).replace(N,""),a=String(a).replace(la,L)):a=String(a).replace(ma,L);return a}
function na(a){var a=String(a),a=!oa.test(a)?"zSafehtmlz":a,b,c=a.indexOf("=");return c>=0&&(b=a.charAt(a.length-1))!='"'&&b!="'"?a.substring(0,c+1)+'"'+a.substring(c+1)+'"':a}function pa(a){a=String(a);return a=!qa.test(a)?"zSafehtmlz":a}function O(a){return a&&a.contentKind===1?a.content:String(a).replace(ra,P)}function sa(a){var b;return a==null?" null ":(b=typeof a)=="boolean"||b=="number"?" "+a+" ":"'"+O(a)+"'"}function ta(a){return String(a).replace(ua,P)}var Q=/['-)]/g
function R(a){return"%"+a.charCodeAt(0).toString(16)}function va(a){if(a&&a.contentKind===2)return S(a);a=encodeURIComponent(a);return a.replace(Q,R)}function S(a){a=String(a);if(/[\0- "<>\\{}\x7f\x85\xa0\u2028\u2029\uff00-\uffff]|%(?![\da-f]{2})/i.test(a)){for(var a=a.split(/(%[\da-f]{2}|[#$&+,/:;=?@[\]])/i),b=a.length-1;b>=0;b-=2)a[b]=encodeURIComponent(a[b]);a=a.join("")}return a.replace(Q,R)}function wa(a){var b=String(a);return xa.test(b)?S(a):"#zSafehtmlz"}
function ya(a){return String(a).replace(za,Aa)}function Ba(a){a==null?a="":(a=String(a),a=!Ca.test(a)?"zSafehtmlz":a);return a}var T={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};function L(a){return T[a]||(T[a]="&#"+a.charCodeAt(0)+";")}var U={"\t":"\\t","\n":"\\n","\x0c":"\\f","\r":"\\r","/":"\\/","\\":"\\\\"};function P(a){var b;if(!(b=U[a])){b=a.charCodeAt(0).toString(16);var c=b.length<=2?"\\x00":"\\u0000";b=c.substring(0,c.length-b.length)+b;b=U[a]=b}return b}var V={}
function Aa(a){return V[a]||(V[a]="\\"+a.charCodeAt(0).toString(16)+" ")}
var K=/[\0"&'<>]/g,M=/[\0"'<>]/g,ma=/[\0\t-\r "&'/<->`\x85\xa0\u2028\u2029-]/g,la=/[\0\t-\r "'/<->`\x85\xa0\u2028\u2029-]/g,ra=/[\0\b-\r"&'/<->\\\x85\u2028\u2029]/g,ua=/[\0\b-\r"$&-/:<-?[-^{-}\x85\u2028\u2029]/g,za=/[\0\b-\r"&-*/:->@\\{}\x85\xa0\u2028\u2029]/g,Ca=/^(?!-*(?:expression|(?:moz-)?binding))(?:[#.]?-?\w[\w-]*(?:-[_a-z][\w-]*)*-?|-?(?:\d+(?:\.\d*)?|\.\d)(?:[a-z]{1,2}|%)?|!important|)$/i,xa=/^(?:(?:https?|mailto):|[^#&/:?]*(?:[#/?]|$))/i,oa=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[\w$:-]*|dir=(?:ltr|rtl))$/i,
qa=/^(?!script|style|title|textarea|xmp|no)[\w$:-]*$/i,N=/<(?:!|\/?[a-z])(?:[^"'>]|"[^"]*"|'[^']*')*>/gi,W=[J,ia,ja,ka,pa,na,O,sa,ta,ya,Ba,va,S,wa],X,Y;
(function(){function a(a,b){return function(c){return a(b(c))}}var b=0,c={};Y=function(d){for(var i=d.length,l=i;--l>=0;)d[l]=String(d[l]).replace(/\0+/g,"");var n=d.join("\x00");if(c.hasOwnProperty(n))return c[n];for(var g=0,m=[],l=0;l<i-1;++l){var e=d[l],g=fa(e,g);if(g===23)throw Error(e);a:{var e=m,f=g&31;f===6&&(g=C(g&224,g&1792,6144));f=z[g&31];switch(g&229376){case 32768:f=13;g=g&-229377|65536;break;case 98304:f=11;break;case 0:break;case 131072:case 65536:(g&1792)!==768&&(f=12);break;default:g=
23;break a}if(f===void 0)g=23;else{var t=null,r=g&6144;if(r!==0)switch(f){case 0:break;case 2:r===6144&&(f=3);break;case 3:break;default:y[f]||(t=r===6144?3:2)}e.k=f;e.l=t}}f=m.k;e=m.l;f=W[f];if(f==null)throw Error("Interpolation in illegal position after "+d.slice(0,l+1).join("${...}"));e!==null&&(f=a(W[e],f));m.push(f)}++b===50&&(c={},b=0);return c[n]=m};X=function(a){var b,c,n=a.raw,g=n.length-1,m=Y(n),e=[];c=0;for(var f=-1;c<g;)e[++f]=n[c],b=m[c],e[++f]=b(arguments[++c]);e[++f]=n[g];return new I(e.join(""))}})()
safehtml=X})()
